"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8743],{6811:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var t=r(4848),s=r(8453);const o={},i="LuaDocs",a={id:"library-structure/luadocs",title:"LuaDocs",description:"Although the Stormwind Library is fully covered in this documentation page",source:"@site/docs/library-structure/luadocs.md",sourceDirName:"library-structure",slug:"/library-structure/luadocs",permalink:"/docs/library-structure/luadocs",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/library-structure/luadocs.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Documentation",permalink:"/docs/library-structure/docs"},next:{title:"Resources",permalink:"/docs/category/resources"}},l={},d=[{value:"How to generate Lua documentation files",id:"how-to-generate-lua-documentation-files",level:2},{value:"Documentation standards",id:"documentation-standards",level:2},{value:"Generated docs",id:"generated-docs",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"luadocs",children:"LuaDocs"}),"\n",(0,t.jsx)(n.p,{children:"Although the Stormwind Library is fully covered in this documentation page\r\nbuilt over Docusaurus, the technical documentation is not well described\r\nhere, as its purpose is to provide a general overview of the library and\r\nits features."}),"\n",(0,t.jsx)(n.p,{children:"The technical documentation is intended to provide a more detailed view of\r\nhow methods and classes are implemented, as well as how they interact with\r\neach other, what they expect and also their outputs."}),"\n",(0,t.jsx)(n.p,{children:"For that reason, every method and property of the library should be covered\r\nby Lua comments describing methods' signatures, parameters, and return\r\ntypes."}),"\n",(0,t.jsx)(n.h2,{id:"how-to-generate-lua-documentation-files",children:"How to generate Lua documentation files"}),"\n",(0,t.jsxs)(n.p,{children:["Lua documentation files are generated using the ",(0,t.jsx)(n.a,{href:"https://github.com/lunarmodules/ldoc",children:"ldoc tool"}),",\r\nand it's available through the ",(0,t.jsx)(n.code,{children:"luarocks"})," package manager."]}),"\n",(0,t.jsx)(n.p,{children:"The steps below were written on April 7, 2024 and are valid for a Windows 11\r\nenvironment with Lua 5.4. They should should differ in other environments\r\nand Lua versions."}),"\n",(0,t.jsx)(n.p,{children:"Future updates in this documentation may include steps for MacOS, Linux and\r\nalso for other Windows versions."}),"\n",(0,t.jsx)(n.admonition,{title:"Note about the steps below",type:"tip",children:(0,t.jsxs)(n.p,{children:["There are lots of ways to be able to run the ",(0,t.jsx)(n.code,{children:"ldoc"})," tool. If you manage to\r\nrun it without installing ",(0,t.jsx)(n.strong,{children:"luarocks"}),", you can skip the steps below and\r\njust run the ",(0,t.jsx)(n.code,{children:"ldoc"})," command in the root folder of this project."]})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Make sure to have LuaBinaries instead of only the Lua executable, so you\r\nhave an ",(0,t.jsx)(n.code,{children:"include"})," folder containing Lua headers; the one used in this\r\nguide was ",(0,t.jsx)(n.a,{href:"https://luabinaries.sourceforge.net/download.html",children:"lua-5.4.2_Win64_dllw6_lib.zip"})]}),"\n",(0,t.jsxs)(n.li,{children:["Download ",(0,t.jsx)(n.a,{href:"https://luarocks.github.io/luarocks/releases/",children:"luarocks-3.11.0-windows-64.zip (luarocks.exe stand-alone Windows 64-bit binary)"})]}),"\n",(0,t.jsxs)(n.li,{children:["Unzip ",(0,t.jsx)(n.code,{children:"luarocks.exe"})," in the same folder your Lua installation is","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If your environment variables are correctly set and you're able to\r\nrun Lua from a command line tool, you can run ",(0,t.jsx)(n.code,{children:"luarocks"})," right away"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Download ",(0,t.jsx)(n.a,{href:"https://winlibs.com/",children:"GCC 13.2.0 (with POSIX threads) + LLVM/Clang/LLD/LLDB 17.0.6 + MinGW-w64 11.0.1 (UCRT)"}),"\r\nand unzip the ",(0,t.jsx)(n.code,{children:"mingw64"})," in the same folder your Lua installation is"]}),"\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"mingw64\\bin"})," folder to your PATH environment variable"]}),"\n",(0,t.jsxs)(n.li,{children:["Run the following commands","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"luarocks install luafilesystem\r\n\r\nluarocks install penlight\r\n\r\nluarocks install ldoc\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"C:\\Users\\{YOUR_USERNAME}\\AppData\\Roaming\\luarocks\\bin"})," to your PATH\r\nenvironment variable"]}),"\n",(0,t.jsxs)(n.li,{children:["Now you should be able to run the ",(0,t.jsx)(n.code,{children:"ldoc"})," command from your command line\r\nand generate the documentation files"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"documentation-standards",children:"Documentation standards"}),"\n",(0,t.jsxs)(n.p,{children:["The documentation standards are based on the\r\n",(0,t.jsx)(n.a,{href:"https://lunarmodules.github.io/ldoc/manual/manual.md.html",children:"LDoc manual"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"However, there are some rules that are not covered by the manual, so\r\nthese are a couple of standards that are used in the Stormwind Library\r\nLuaDoc blocks:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Class and methods blocks use the ",(0,t.jsx)(n.code,{children:"--[[--"})," doc block style."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"@classmod"}),' tag is used to define the class name and due to how the library is\r\nstructured, the class "namespace" or "module" need to be placed before the class name separated\r\nby a dot, e.g. ',(0,t.jsx)(n.code,{children:"Support.Arr"}),". That way the documentation will be generated in a more organized\r\nway."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"@local"})," when methods should be considered ",(0,t.jsx)(n.strong,{children:"private"})," or ",(0,t.jsx)(n.strong,{children:"protected"}),", in other words,\r\nwhen they should not be used outside the class."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"@usage"})," tag should be used to show examples of how to use the class\r\nand methods. Those can be idented with 4 spaces, just like a code block."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Types"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Prefer the usage of ",(0,t.jsx)(n.code,{children:"@tparam"})," and ",(0,t.jsx)(n.code,{children:"@treturn"})," tags to define the types.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Don't use a ",(0,t.jsx)(n.code,{children:"."})," at the end of the setence, unless it has 2 or more\r\nphrases."]}),"\n",(0,t.jsx)(n.li,{children:"Prefer to not break lines, even if the line is longer than the current\r\nsizes as observed in other classes, unless it's really necessary by\r\nbeing too long or having multiple phrases."}),"\n",(0,t.jsx)(n.li,{children:"Capitalize the first word describing the parameter or return type."}),"\n",(0,t.jsxs)(n.li,{children:["When using multiple types, separate them by a ",(0,t.jsx)(n.code,{children:"|"})," character and prefer\r\nto sort them alphabetically, except when one of the types is ",(0,t.jsx)(n.code,{children:"nil"}),",\r\nwhich should be the last one, example: ",(0,t.jsx)(n.code,{children:"number|string|nil"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Prefer ",(0,t.jsx)(n.code,{children:"integer"})," over ",(0,t.jsx)(n.code,{children:"number"})," when the value must be an integer."]}),"\n",(0,t.jsxs)(n.li,{children:["Prefer ",(0,t.jsx)(n.code,{children:"boolean"})," over ",(0,t.jsx)(n.code,{children:"bool"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"any"})," when the type is not defined."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"This section is a work in progress",type:"tip",children:(0,t.jsx)(n.p,{children:"This section will be fed with more information as the library grows and\r\nstandards become more clear."})}),"\n",(0,t.jsx)(n.h2,{id:"generated-docs",children:"Generated docs"}),"\n",(0,t.jsxs)(n.p,{children:["The technical documentation for the Stormwind Library is generated inside the\r\ndocusaurus' ",(0,t.jsx)(n.code,{children:"documentation/static/lua-docs"})," folder and it's available\r\n",(0,t.jsx)(n.a,{href:"pathname:///lua-docs/index.html",children:"here"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# this command must be run from the ./dist folder\r\nldoc stormwind-library.lua -d ../documentation/static/lua-docs -c ../config.ld -v --multimodule --all\n"})}),"\n",(0,t.jsx)(n.p,{children:"As of now, the generated documentation is being pushed to the repository,\r\nbut that can be changed in the future."}),"\n",(0,t.jsxs)(n.admonition,{title:"Linking to the generated docs",type:"danger",children:[(0,t.jsxs)(n.p,{children:["When the Docusaurus task generates the ",(0,t.jsx)(n.code,{children:"build"})," folder, it will copy the generated\r\ntechnical Lua documentation from the ",(0,t.jsx)(n.code,{children:"static/lua-docs"})," folder, which means they'll\r\nbecome available as a valid URL."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"However"}),", when linking to those HTML files, it's important to use a different type\r\nof ",(0,t.jsx)(n.a,{href:"https://docusaurus.io/docs/advanced/routing#escaping-from-spa-redirects",children:"link"}),",\r\notherwise, even as a valid link, the page will result as a 404 page ",(0,t.jsx)(n.strong,{children:"when clicked\r\nfrom any page"}),", accessible only by typing the URL directly in the browser."]}),(0,t.jsx)(n.p,{children:"When linking to the generated Lua documentation, use the following pattern:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"[click here...](pathname:///lua-docs/index.html)\n"})}),(0,t.jsxs)(n.p,{children:["Of course, the link above is valid for any other HTML in the ",(0,t.jsx)(n.code,{children:"static"})," folder."]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var t=r(6540);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);